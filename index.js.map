{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport const searchParams = {\n    key: \"49370503-7e4a3b73ee503433174e66c4b\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    per_page: 15,\n    safesearch: true,\n};\n\nexport default async function fetchPhotos(searchQuery, page) {\n    searchParams.q = searchQuery;\n    searchParams.page = page;\n    try {\n        return await axios.get(`?${new URLSearchParams(searchParams)}`);\n    } catch (error) {\n        return error;\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const gallery = document.querySelector(\".gallery\");\nexport const loader = document.querySelector(\".loader\");\nconst lightbox = new SimpleLightbox(\".gallery li a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport default function createMarkup(images) {\n  const markup = images.map(image => {\n    const { webformatURL, tags, largeImageURL, likes, views, comments, downloads } = image;\n      return `<li class=\"gallery-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-image\" width=\"360\" height=\"152\" />\n          <ul class=\"card-caption\">\n            <li class=\"image-tag\"><p>Likes<br />${likes}</p></li>\n            <li class=\"image-tag\"><p>Views<br />${views}</p></li>\n            <li class=\"image-tag\"><p>Comments<br />${comments}</p></li>\n            <li class=\"image-tag\"><p>Downloads<br />${downloads}</p></li>\n          </ul>\n        </a>\n      </li>`;\n    }).join(\"\");\n    loader.classList.toggle(\"loader\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport fetchPhotos from \"./js/pixabay-api\";\nimport createMarkup from \"./js/render-functions\";\nimport { gallery, loader } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst button = document.querySelector(\"button[type='button']\");\nlet searchQuery = \"\";\nlet page = 1;\nbutton.style = \"display: none\";\nloader.classList.toggle(\"loader\");\n\nform.addEventListener(\"submit\", renderPhotos);\nbutton.addEventListener(\"click\", getMorePhotos)\n\nfunction renderPhotos(event) {\n    event.preventDefault();\n    searchQuery = event.currentTarget.elements.search.value.trim();\n    if (!searchQuery) {\n        iziToast.error({\n            message: \"Search field must not be empty!\",\n            position: \"topRight\",\n        });\n        return;\n    };\n    gallery.innerHTML = \"\";\n    loader.classList.toggle(\"loader\");\n    fetchPhotos(searchQuery, page)\n        .then(response => {\n            if (response.data.totalHits === 0) {\n                loader.classList.toggle(\"loader\");\n                iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                });\n                button.style = \"display: none\";\n                return;\n            };\n            createMarkup(response.data.hits);\n            button.style = \"display: initial\";\n        })\n        .catch(() => {\n            loader.classList.toggle(\"loader\");\n            loader.innerHTML = \"Oops... something went wrong\";\n        });\n};\n\nfunction getMorePhotos() {\n    page += 1;\n    loader.classList.toggle(\"loader\");\n    const card = document.querySelector(\".gallery>li\");\n    const cardHeight = card.getBoundingClientRect().height;\n    fetchPhotos(searchQuery, page)\n        .then(response => {\n            if (response.data.totalHits < page * 15) {\n                button.style = \"display: none\";\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\",\n                });\n                loader.classList.toggle(\"loader\");\n                return;\n            }\n            createMarkup(response.data.hits);\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n\n        })\n        .catch(() => {\n            loader.classList.toggle(\"loader\");\n            loader.innerHTML = \"Oops... something went wrong\";\n        });\n}"],"names":["axios","searchParams","fetchPhotos","searchQuery","page","error","gallery","loader","lightbox","SimpleLightbox","createMarkup","images","markup","image","webformatURL","tags","largeImageURL","likes","views","comments","downloads","form","button","renderPhotos","getMorePhotos","event","iziToast","response","cardHeight"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAe,CACxB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,SAAU,GACV,WAAY,EAChB,EAEe,eAAeC,EAAYC,EAAaC,EAAM,CACzDH,EAAa,EAAIE,EACjBF,EAAa,KAAOG,EACpB,GAAI,CACA,OAAO,MAAMJ,EAAM,IAAI,IAAI,IAAI,gBAAgBC,CAAY,CAAC,EAAE,CACjE,OAAQI,EAAO,CACZ,OAAOA,CACV,CACL,CCjBO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAChDC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAClB,CAAC,EAEc,SAASC,EAAaC,EAAQ,CAC3C,MAAMC,EAASD,EAAO,IAAIE,GAAS,CACjC,KAAM,CAAE,aAAAC,EAAc,KAAAC,EAAM,cAAAC,EAAe,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EAC/E,MAAO;AAAA,mBACMG,CAAa;AAAA,sBACVF,CAAY,UAAUC,CAAI;AAAA;AAAA,kDAEEE,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA,YAI/D,CAAK,EAAE,KAAK,EAAE,EACVb,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,mBAAmB,YAAaM,CAAM,EAC9CJ,EAAS,QAAO,CACpB,CCtBA,MAAMa,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,uBAAuB,EAC7D,IAAInB,EAAc,GACdC,EAAO,EACXkB,EAAO,MAAQ,gBACff,EAAO,UAAU,OAAO,QAAQ,EAEhCc,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAO,iBAAiB,QAASE,CAAa,EAE9C,SAASD,EAAaE,EAAO,CAGzB,GAFAA,EAAM,eAAc,EACpBtB,EAAcsB,EAAM,cAAc,SAAS,OAAO,MAAM,OACpD,CAACtB,EAAa,CACduB,EAAS,MAAM,CACX,QAAS,kCACT,SAAU,UACtB,CAAS,EACD,MACR,CACIpB,EAAQ,UAAY,GACpBC,EAAO,UAAU,OAAO,QAAQ,EAChCL,EAAYC,EAAaC,CAAI,EACxB,KAAKuB,GAAY,CACd,GAAIA,EAAS,KAAK,YAAc,EAAG,CAC/BpB,EAAO,UAAU,OAAO,QAAQ,EAChCmB,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC9B,CAAiB,EACDJ,EAAO,MAAQ,gBACf,MAEhB,CAAYZ,EAAaiB,EAAS,KAAK,IAAI,EAC/BL,EAAO,MAAQ,kBAC3B,CAAS,EACA,MAAM,IAAM,CACTf,EAAO,UAAU,OAAO,QAAQ,EAChCA,EAAO,UAAY,8BAC/B,CAAS,CACT,CAEA,SAASiB,GAAgB,CACrBpB,GAAQ,EACRG,EAAO,UAAU,OAAO,QAAQ,EAEhC,MAAMqB,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAChD1B,EAAYC,EAAaC,CAAI,EACxB,KAAKuB,GAAY,CACd,GAAIA,EAAS,KAAK,UAAYvB,EAAO,GAAI,CACrCkB,EAAO,MAAQ,gBACfI,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC9B,CAAiB,EACDnB,EAAO,UAAU,OAAO,QAAQ,EAChC,MACH,CACDG,EAAaiB,EAAS,KAAK,IAAI,EAC/B,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC1B,CAAa,CAEb,CAAS,EACA,MAAM,IAAM,CACTrB,EAAO,UAAU,OAAO,QAAQ,EAChCA,EAAO,UAAY,8BAC/B,CAAS,CACT"}