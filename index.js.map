{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport const searchParams = {\n    key: \"49370503-7e4a3b73ee503433174e66c4b\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    per_page: 15,\n    safesearch: true,\n};\n\nexport default async function fetchPhotos(searchQuery, page) {\n    searchParams.q = searchQuery;\n    searchParams.page = page;\n    try {\n        const response = await axios.get(`?${new URLSearchParams(searchParams)}`);\n        return response.data;\n    } catch (error) {\n        return error;\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const gallery = document.querySelector(\".gallery\");\nexport const lightbox = new SimpleLightbox(\".gallery li a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createMarkup(images) {\n  const markup = images.map(image => {\n    const { webformatURL, tags, largeImageURL, likes, views, comments, downloads } = image;\n    return `<li class=\"gallery-card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-image\" width=\"360\" height=\"152\" />\n        <ul class=\"card-caption\">\n          <li class=\"image-tag\"><p>Likes<br />${likes}</p></li>\n          <li class=\"image-tag\"><p>Views<br />${views}</p></li>\n          <li class=\"image-tag\"><p>Comments<br />${comments}</p></li>\n          <li class=\"image-tag\"><p>Downloads<br />${downloads}</p></li>\n        </ul>\n      </a>\n    </li>`;\n  }).join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport fetchPhotos from \"./js/pixabay-api\";\nimport { gallery, lightbox, createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst button = document.querySelector(\"button[type='button']\");\nconst loader = document.querySelector(\".loader\");\n\nlet searchQuery = \"\";\nlet page = 1;\n\nbutton.style = \"display: none\";\nloader.classList.toggle(\"loader\");\n\nform.addEventListener(\"submit\", renderPhotos);\nbutton.addEventListener(\"click\", getMorePhotos)\n\nasync function renderPhotos(event) {\n    event.preventDefault();\n    searchQuery = event.currentTarget.elements.search.value.trim();\n    page = 1;\n    if (!searchQuery) {\n        iziToast.error({\n            message: \"Search field must not be empty!\",\n            position: \"topRight\",\n        });\n        return;\n    };\n    gallery.innerHTML = \"\";\n    loader.classList.toggle(\"loader\");\n    try {\n        const data = await fetchPhotos(searchQuery, page);\n        if (data.totalHits === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            button.style = \"display: none\";\n            return;\n        }\n        createMarkup(data.hits);\n        if (data.totalHits < 15) {\n            button.style = \"display: none\";\n            return;\n        }\n        button.style = \"display: initial\";\n    } catch (error) {\n        loader.innerHTML = \"Oops... something went wrong\";\n    } finally {\n        loader.classList.toggle(\"loader\");\n        lightbox.refresh();\n    }\n};\n\nasync function getMorePhotos() {\n    page += 1;\n    loader.classList.toggle(\"loader\");\n    const card = document.querySelector(\".gallery>li\");\n    const cardHeight = card.getBoundingClientRect().height;\n    try {\n        const data = await fetchPhotos(searchQuery, page);\n        if (data.totalHits > 15 * page) {\n            createMarkup(data.hits);\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        } else {\n            button.style = \"display: none\";\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n    } catch (error) {\n        loader.innerHTML = \"Oops... something went wrong\";\n    } finally {\n        loader.classList.toggle(\"loader\");\n    }\n}"],"names":["axios","searchParams","fetchPhotos","searchQuery","page","error","gallery","lightbox","SimpleLightbox","createMarkup","images","markup","image","webformatURL","tags","largeImageURL","likes","views","comments","downloads","form","button","loader","renderPhotos","getMorePhotos","event","iziToast","data","cardHeight"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAe,CACxB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,SAAU,GACV,WAAY,EAChB,EAEe,eAAeC,EAAYC,EAAaC,EAAM,CACzDH,EAAa,EAAIE,EACjBF,EAAa,KAAOG,EACpB,GAAI,CAEA,OADiB,MAAMJ,EAAM,IAAI,IAAI,IAAI,gBAAgBC,CAAY,CAAC,EAAE,GACxD,IACnB,OAAQI,EAAO,CACZ,OAAOA,CACV,CACL,CClBO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,gBAAiB,CACxD,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EAAO,IAAIE,GAAS,CACjC,KAAM,CAAE,aAAAC,EAAc,KAAAC,EAAM,cAAAC,EAAe,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA,iBACMG,CAAa;AAAA,oBACVF,CAAY,UAAUC,CAAI;AAAA;AAAA,gDAEEE,CAAK;AAAA,gDACLC,CAAK;AAAA,mDACFC,CAAQ;AAAA,oDACPC,CAAS;AAAA;AAAA;AAAA,UAI7D,CAAG,EAAE,KAAK,EAAE,EACVb,EAAQ,mBAAmB,YAAaK,CAAM,CAChD,CCpBA,MAAMS,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,uBAAuB,EACvDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAInB,EAAc,GACdC,EAAO,EAEXiB,EAAO,MAAQ,gBACfC,EAAO,UAAU,OAAO,QAAQ,EAEhCF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CF,EAAO,iBAAiB,QAASG,CAAa,EAE9C,eAAeD,EAAaE,EAAO,CAI/B,GAHAA,EAAM,eAAc,EACpBtB,EAAcsB,EAAM,cAAc,SAAS,OAAO,MAAM,OACxDrB,EAAO,EACH,CAACD,EAAa,CACduB,EAAS,MAAM,CACX,QAAS,kCACT,SAAU,UACtB,CAAS,EACD,MACR,CACIpB,EAAQ,UAAY,GACpBgB,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACA,MAAMK,EAAO,MAAMzB,EAAYC,EAAaC,CAAI,EAChD,GAAIuB,EAAK,YAAc,EAAG,CACtBD,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EACDL,EAAO,MAAQ,gBACf,MACH,CAED,GADAZ,EAAakB,EAAK,IAAI,EAClBA,EAAK,UAAY,GAAI,CACrBN,EAAO,MAAQ,gBACf,MACH,CACDA,EAAO,MAAQ,kBAClB,MAAe,CACZC,EAAO,UAAY,8BAC3B,QAAc,CACNA,EAAO,UAAU,OAAO,QAAQ,EAChCf,EAAS,QAAO,CACnB,CACL,CAEA,eAAeiB,GAAgB,CAC3BpB,GAAQ,EACRkB,EAAO,UAAU,OAAO,QAAQ,EAEhC,MAAMM,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAChD,GAAI,CACA,MAAMD,EAAO,MAAMzB,EAAYC,EAAaC,CAAI,EAC5CuB,EAAK,UAAY,GAAKvB,GACtBK,EAAakB,EAAK,IAAI,EACtB,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC1B,CAAa,IAEDP,EAAO,MAAQ,gBACfK,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC1B,CAAa,EAER,MAAe,CACZJ,EAAO,UAAY,8BAC3B,QAAc,CACNA,EAAO,UAAU,OAAO,QAAQ,CACnC,CACL"}